"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.importFrom = importFrom;
const tslib_1 = require("tslib");
const node_path_1 = tslib_1.__importDefault(require("node:path"));
const logger_1 = require("../logger");
const asArray_1 = require("./asArray");
async function importFrom(module, lookup) {
    const filename = require.resolve(module, { paths: (0, asArray_1.asArray)(lookup) });
    const dirname = node_path_1.default.dirname(filename);
    const exports = await import(filename).then((module) => module.default ?? module);
    const result = { filename, dirname, exports };
    logger_1.log.trace({ paths: lookup }, 'resolve module %j -> %j', module, filename);
    return result;
}
//# sourceMappingURL=importFrom.js.map