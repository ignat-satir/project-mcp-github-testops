"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolvePromisedTestCase = resolvePromisedTestCase;
exports.resolvePromisedItem = resolvePromisedItem;
const logger_1 = require("../logger");
const utils_1 = require("../utils");
async function resolvePromisedTestCase(context, extractor) {
    const promisedItem = preparePromisedItem(context, extractor, 'result');
    try {
        if (await promisedItem.ignored) {
            return;
        }
        return await (0, utils_1.resolvePromisedProperties)(promisedItem);
    }
    catch (error) {
        logger_1.log.error(error, 'Failed to report test case');
        return;
    }
}
async function resolvePromisedItem(context, extractor, resultKey) {
    return await (0, utils_1.resolvePromisedProperties)(preparePromisedItem(context, extractor, resultKey));
}
function preparePromisedItem(context, extractor, resultKey) {
    const value = {};
    const firstPass = extractor({ ...context, value, [resultKey]: value });
    const secondPass = extractor({ ...context, value, [resultKey]: firstPass });
    return secondPass;
}
//# sourceMappingURL=resolveTestItem.js.map